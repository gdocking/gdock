![Version:](https://img.shields.io/badge/version-unreleased-inactive)
[![License: Unlicense](https://img.shields.io/badge/license-Unlicense-blue.svg)](http://unlicense.org/) 
[![Build Status](https://travis-ci.com/rvhonorato/gdock.svg?branch=master)](https://travis-ci.com/rvhonorato/gdock)
[![codecov](https://codecov.io/gh/rvhonorato/gdock/branch/master/graph/badge.svg)](https://codecov.io/gh/rvhonorato/gdock)
[![Codacy Badge](https://app.codacy.com/project/badge/Grade/a794c83bedbc4e50b4bb6a0ed73ba3d0)](https://www.codacy.com/gh/rvhonorato/gdock/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=rvhonorato/gdock&amp;utm_campaign=Badge_Grade) 

# gdock
_logo coming soon!_

# License

This project license is the [Unlicense](https://unlicense.org) and by so:

> "_anyone is free to copy, modify, publish, use, compile, sell, or distribute this software, either in source code form or as a compiled binary, for any purpose, commercial or non-commercial, and by any means_" 

:) 

**The code is indented for the public domain.**

Be warned that the third-party dependencies have different licenses.

# Disclaimer

I am by no means an expert in genetic algorithms, and do not aspire this software to compete with any of the tens of dozens similar software out there. It was idealized as an exercise in programming and to test a few concepts.

I am also aware that there is still very much to be done and improved. Check the [CONTRIBUTING](CONTRIBUTING.md) if you would like to help/criticize (:

# Concept

In the project we apply [Genetic Algorithm](https://en.wikipedia.org/wiki/Genetic_algorithm) to protein-protein docking. Each individual is represented by its cartesian coordinates and euler angles, and the fitness of each conformation is given by a scoring function.

The input of each simulation is two [PDB files](https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/introduction), one receptor and one ligand; plus a list of residues that are likely to play a part in the interaction. There is (and probably will never be) support for _ab initio_ experiments.

Initial placement of the molecule is done in a way that each of the interface composed by residues that are likely to be in the interface are facing each other. From here on, the receptor is fixed in space and all geometric opertions are be done to the ligand. Each individual (=conformation) is generated by randomly assigning three floats that will describe a region in space (around the geometric center of the initial ligand positioning) and three more floats that will describe its rotation. 

The fitness of each one of these individual is evaluated (=scored) and over each generation, individuals have a chance of mutation, where one of the six descriptors is randomly changed and also a chance of crossover, where individuals exchange descriptors.

# Installation 

## Python Dependencies

An `environment.yml` file is provided and Anaconda is recomended.

```
$ conda env create -f environment.yml
$ conda activate gdock
(gdock) $
```

## Third-party Dependencies

**gdock** uses [DComplex](https://sparks-lab.org/Publications_files/zhou061.pdf) as the scoring function, [FCC](https://github.com/haddocking/FCC) as the clustering engine and [DockQ](https://github.com/bjornwallner/DockQ) to calculate CAPRI metrics.

* DComplex

    * Download from [this link](http://servers.sparks-lab.org/downloads/dcomplex2.tar.gz)
    * For it to work as intended in **gdock** you need to change line 115 and 148 of `dcomplex.c` and provide the full path to the DComplex installation:
    ```c++
    // L115
    read_charge_file("/Users/rodrigo/software/dcomplex_single_file/charge_inp.dat");
    // L148
    fp=(FILE *)fopen("/Users/rodrigo/software/dcomplex_single_file/fort.21_alla","r"); //monomic 1.61
    ```
    Then compile normally.

* FCC
    * Clone the repository from [this link](https://github.com/haddocking/FCC)
    * Follow the install instructions
    * Set the default branch to `python3`
    ```bash
    ~/repos/fcc $ git checkout python3
    ```
* DockQ
    * Download it from [this link](https://github.com/bjornwallner/DockQ)
    * Follow the install instructions

Edit `etc/gdock.ini` with the correct paths

# How-to-use

An `examples/` folder is provided, navigate to it and inspect the `run.toml` parameter file, change the number of processors to match what is available in your system.

```
(gdock) examples $ python ~/repos/gdock/gdock.py run.toml
```

# Benchmark

_coming soon!_ :)